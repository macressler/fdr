Welcome to StackEdit!
===================


# BlackBox

An AR Drone Parrot 2.0 flight recorder, it was designed to work along side the [ARDrone](https://www.npmjs.com/package/ar-drone) npm module.

----------
#API

BlackBox has a very simple and consistent API, it isn't finished yet however and work is ongoing so please do check regularly the code itself in case the documents have gotten out of sync.

BlackBox is designed to capture navigational data generated by an AR Drone Parrot 2.0 and dump it out to some form of backend, currently STDOUT, a JSON text file and MongoDB are supported.

toSTDOUT()
toJSON(fileName, callBack(data, path) {/**/});
toMongoDB(connectionArguments, callBack(result) {/**/});

----------

# Examples

The following should be enough to get anyone up and running with the basics of BlackBox.

>var ardrone = require("ar-drone");
>var BlackBox = require("blackbox");
>var client = ardrone.createClient();
>var bb = new BlackBox();

>client.on("navdata", bb.recordData);
>&nbsp;&nbsp;&nbsp;&nbsp;client.land(function() {
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var out = path.join("navdata", "data.json");
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb.toJSON(out);
>&nbsp;&nbsp;&nbsp;&nbsp;});
>});

This example shows how to write information to a MongoDB backend.

>var ardrone = require("ar-drone");
>var BlackBox = require("blackbox");
>var client = ardrone.createClient();
>var bb = new BlackBox();
>
>var conArgs = {
>&nbsp;&nbsp;&nbsp;&nbsp;"ip": "127.0.0.1",
>&nbsp;&nbsp;&nbsp;&nbsp;"port": "27017",
>&nbsp;&nbsp;&nbsp;&nbsp;"db": "blackbox",
>&nbsp;&nbsp;&nbsp;&nbsp;"collection": "flight1"
>};
>
>client.on("navdata", bb.recordData);
>&nbsp;&nbsp;&nbsp;&nbsp;client.land(function() {
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var out = path.join("navdata", "data.json");
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bb.toMongoDB(conArgs, function(result) {
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(result);
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
>&nbsp;&nbsp;&nbsp;&nbsp;});
>});

----------


